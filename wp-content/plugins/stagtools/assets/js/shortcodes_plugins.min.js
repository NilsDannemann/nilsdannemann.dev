/**
 * Table of Contents
 *
 * 1. jQuery Live Query
 * 2. jQuery Appendo
 * 3. base64.js
 * 4. custom
 *
 */
// 1. jQuery Live Query
// 4. custom
var FontAwesomeIcons;!function(a){a.extend(a.fn,{livequery:function(i,n,o){var s=this,r;return a.isFunction(i)&&(o=n,n=i,i=void 0),a.each(a.livequery.queries,function(e,t){if(!(s.selector!=t.selector||s.context!=t.context||i!=t.type||n&&n.$lqguid!=t.fn.$lqguid||o&&o.$lqguid!=t.fn2.$lqguid))return(r=t)&&!1}),(r=r||new a.livequery(this.selector,this.context,i,n,o)).stopped=!1,r.run(),this},expire:function(i,n,o){var s=this;return a.isFunction(i)&&(o=n,n=i,i=void 0),a.each(a.livequery.queries,function(e,t){s.selector!=t.selector||s.context!=t.context||i&&i!=t.type||n&&n.$lqguid!=t.fn.$lqguid||o&&o.$lqguid!=t.fn2.$lqguid||this.stopped||a.livequery.stop(t.id)}),this}}),a.livequery=function(e,t,i,n,o){return this.selector=e,this.context=t,this.type=i,this.fn=n,this.fn2=o,this.elements=[],this.stopped=!1,this.id=a.livequery.queries.push(this)-1,n.$lqguid=n.$lqguid||a.livequery.guid++,o&&(o.$lqguid=o.$lqguid||a.livequery.guid++),this},a.livequery.prototype={stop:function(){var i=this;this.type?this.elements.unbind(this.type,this.fn):this.fn2&&this.elements.each(function(e,t){i.fn2.apply(t)}),this.elements=[],this.stopped=!0},run:function(){if(!this.stopped){var i=this,e=this.elements,n=a(this.selector,this.context),t=n.not(e);this.elements=n,this.type?(t.bind(this.type,this.fn),0<e.length&&a.each(e,function(e,t){a.inArray(t,n)<0&&a.event.remove(t,i.type,i.fn)})):(t.each(function(){i.fn.apply(this)}),this.fn2&&0<e.length&&a.each(e,function(e,t){a.inArray(t,n)<0&&i.fn2.apply(t)}))}}},a.extend(a.livequery,{guid:0,queries:[],queue:[],running:!1,timeout:null,checkQueue:function(){if(a.livequery.running&&a.livequery.queue.length)for(var e=a.livequery.queue.length;e--;)a.livequery.queries[a.livequery.queue.shift()].run()},pause:function(){a.livequery.running=!1},play:function(){a.livequery.running=!0,a.livequery.run()},registerPlugin:function(){a.each(arguments,function(e,t){if(a.fn[t]){var i=a.fn[t];a.fn[t]=function(){var e=i.apply(this,arguments);return a.livequery.run(),e}}})},run:function(e){null!=e?a.inArray(e,a.livequery.queue)<0&&a.livequery.queue.push(e):a.each(a.livequery.queries,function(e){a.inArray(e,a.livequery.queue)<0&&a.livequery.queue.push(e)}),a.livequery.timeout&&clearTimeout(a.livequery.timeout),a.livequery.timeout=setTimeout(a.livequery.checkQueue,20)},stop:function(e){null!=e?a.livequery.queries[e].stop():a.each(a.livequery.queries,function(e){a.livequery.queries[e].stop()})}}),a.livequery.registerPlugin("append","prepend","after","before","wrap","attr","removeAttr","addClass","removeClass","toggleClass","empty","remove","html"),a(function(){a.livequery.play()})}(jQuery),
// 2. jQuery.appendo
/**
 * Appendo Plugin for jQuery v1.01
 * Creates interface to create duplicate clones of last table row (usually for forms)
 * (c) 2008 Kelly Hallman. Free software released under MIT License.
 * See http://deepliquid.com/content/Appendo.html for more info
 */
// Attach appendo as a jQuery plugin
jQuery.fn.appendo=function(e){return this.each(function(){jQuery.appendo.init(this,e)}),this},
// appendo namespace
jQuery.appendo=function(){
// Create a closure so that we can refer to "this" correctly down the line
var g=this;
// Global Options
// These can be set with inline Javascript like so:
// jQuery.appendo.opt.maxRows = 5;
// $.appendo.opt.allowDelete = false;
// (no need, in fact you shouldn't, wrap in jQuery(document).ready() etc)
return this.opt={},this.init=function(t,e){
// Append a row to table instance
function i(){var e=l.clone(c.copyHandlers);e.appendTo(t),o(1),"function"==typeof c.onAdd&&c.onAdd(e),c.focusFirst&&e.find("input:first").focus()}
// Remove last row from table instance
function n(){var e=jQuery(t).find(c.subSelect);("function"!=typeof c.onDel||c.onDel(e))&&(e.remove(),o(-1))}
// Updates the button states after rows change
function o(e){
// Update rows if a delta is provided
d+=e||0,
// Disable the add button if maxRows is set and we have that many rows
// $add_btn.attr('disabled',(!options.maxRows || (rows < options.maxRows))?false:true);
// Show remove button if we've added rows and allowDelete is set
c.allowDelete&&1<d?p.show():p.hide()}
// Returns (jQuery) button objects with label
function s(e){return jQuery("<button />").css(c.buttonStyle).html(e)}
// This function can be returned to kill a received event
function r(e){return e.stopPropagation(),e.preventDefault(),!1}
// Handles a click on the add button
function a(e){return(!c.maxRows||d<c.maxRows)&&i(),r(e)}
// Handles a click event on the remove button
function u(e){return 1<d&&n(),r(e)}
// Update the buttons
// Extend the defaults with global options and options given, if any
var c=jQuery.extend({labelAdd:"Add Row",labelDel:"Remove",allowDelete:!0,
// copyHandlers does not seem to work
// it's been removed from the docs for now...
copyHandlers:!1,focusFirst:!0,onAdd:function(){return!0},onDel:function(){return!0},maxRows:0,wrapClass:"appendoButtons",wrapStyle:{padding:".4em .2em .5em"},buttonStyle:{marginRight:".5em"},subSelect:"tr:last"},g.opt,e),l=jQuery(t).find(c.subSelect).clone(c.copyHandlers),d=1,h=jQuery("#form-child-add").click(a),p=s(c.labelDel).click(u).hide();
// Store clone of last table row
o()},this}(),function(e){"use strict";FontAwesomeIcons=function(){var i="";return e.each(stIconObj.fontawesome,function(e,t){i+='<span class="icon-category">'+e+"</span>",t.map(function(e){i+='<i class="'+e.style+" fa-"+e.id+'" data-icon-id="'+e.id+'" data-style="'+e.style+'"></i>'})}),i}}(jQuery),jQuery(document).ready(function(l){var e={loadVals:function(){var e,n=l("#_stag_shortcode").text();
// fill in the gaps eg {{param}}
l(".stag-input").each(function(){var e=l(this),t,t=(t=e.attr("id")).replace("stag_",""),// gets rid of the stag_ prefix
i=new RegExp("{{"+t+"}}","g");n=n.replace(i,e.val())}),
// adds the filled-in shortcode as hidden input
l("#_stag_ushortcode").remove(),l("#stag-sc-form-table").prepend('<div id="_stag_ushortcode" class="hidden">'+n+"</div>")},cLoadVals:function(){var t=l("#_stag_cshortcode").text(),e="";shortcodes="",
// fill in the gaps eg {{param}}
l(".child-clone-row").each(function(){var e=l(this),i=t;l(".stag-cinput",this).each(function(){var e=l(this),t,t=(t=e.attr("id")).replace("stag_","");// gets rid of the stag_ prefix
re=new RegExp("{{"+t+"}}","g"),i=i.replace(re,e.val())}),shortcodes=shortcodes+i+"\n"}),
// adds the filled-in shortcode as hidden input
l("#_stag_cshortcodes").remove(),l(".child-clone-rows").prepend('<div id="_stag_cshortcodes" class="hidden">'+shortcodes+"</div>"),
// add to parent shortcode
this.loadVals(),e=l("#_stag_ushortcode").text().replace("{{child_shortcode}}",shortcodes),
// add updated parent shortcode
l("#_stag_ushortcode").remove(),l("#stag-sc-form-table").prepend('<div id="_stag_ushortcode" class="hidden">'+e+"</div>")},children:function(){
// assign the cloning plugin
l(".child-clone-rows").appendo({subSelect:"> div.child-clone-row:last-child",allowDelete:!1,focusFirst:!1}),
// remove button
l(".child-clone-row-remove").live("click",function(){var e,t=l(this).parent();return 1<l(".child-clone-row").size()?t.remove():alert("You need a minimum of one row"),!1}),
// assign jUI sortable
l(".child-clone-rows").sortable({placeholder:"sortable-placeholder",items:".child-clone-row"})},resizeTB:function(){var e=l("#TB_ajaxContent"),t=l("#TB_window"),i=l("#stag-popup");t.css({height:i.outerHeight(),width:i.outerWidth(),marginLeft:-i.outerWidth()/2,maxHeight:"85%",overflowY:"scroll"}),e.css({paddingTop:0,paddingLeft:0,paddingRight:0,paddingBottom:0,height:t.outerHeight(),overflow:"auto",// IMPORTANT
width:i.outerWidth()}),l("#stag-popup").addClass("no_preview")},media:function(){var t,i,n=l(".stag-open-media");"image"===n.data("type")?i=StagShortcodes.media_frame_image_title:"video"===n.data("type")&&(i=StagShortcodes.media_frame_video_title),n.on("click",function(e){e.preventDefault(),t||(t=wp.media.frames.stag_media_frame=wp.media({className:"media-frame stag-media-frame",frame:"select",multiple:!1,title:i,library:{type:n.data("type")},button:{text:n.data("text")}})).on("select",function(){var e=t.state().get("selection").first().toJSON();l("#stag_src").val(e.url),l(".stag-input").trigger("change")}),t.open()})},load:function(){var e=this,t=l("#TB_window"),i=l("#stag-popup"),n=l("#stag-sc-form",i),o=l("#_stag_shortcode",n).text(),s=l("#_stag_popup",n).text(),r="",a=l(".stag-all-icons").find("i"),u;l("#close-popup").on("click",function(){tb_remove()}),
// resize TB
e.resizeTB(),l(window).resize(function(){e.resizeTB()}),t.css({border:"none"}),t.find("#TB_title").remove(),
// initialise
e.loadVals(),e.children(),e.cLoadVals(),e.media(),
// update on children value change
l(".stag-cinput",n).live("change",function(){e.cLoadVals()}),
// update on value change
l(".stag-input",n).live("change",function(){e.loadVals()});var c=l(".stag-all-icons");c.append(FontAwesomeIcons()),c.on("click","i",function(e){c.find("i").removeClass("active-icon"),l(this).addClass("active-icon"),l("#stag_icon").val(l(this).data("icon-id")),l("#stag_style").val(l(this).data("style")),l(".stag-input").trigger("change")}),l(".stag-control-buttonset").buttonset(),l(".stag-control-buttonset").on("change","input",function(e){var t=l(this).data("key");l("#"+t).val(l(this).val()),l(".stag-input").trigger("change")}),
// when insert is clicked
l(".stag-insert",n).click(function(){if(window.tinyMCE){var e=tinyMCE.majorVersion;"3"===e?(window.tinyMCE.execInstanceCommand(window.tinyMCE.activeEditor.id,"mceInsertContent",!1,l("#_stag_ushortcode",n).html()),tb_remove()):"4"===e&&(window.tinyMCE.activeEditor.insertContent(l("#_stag_ushortcode",n).html()),tb_remove())}})}};
// run
l("#stag-popup").livequery(function(){e.load()})});var __=wp.i18n.__;window.StagLang={insert:__("Insert Stag Shortcode","stag"),button:__("Buttons","stag"),columns:__("Columns","stag"),tabs:__("Tabs","stag"),toggle:__("Toggle","stag"),dropcap:__("Dropcap","stag"),icon:__("Font Icon","stag"),media_elements:__("Media Elements","stag"),widget_area:__("Widget Area","stag"),image:__("Image","stag"),video:__("Video","stag"),map:__("Google Map","stag")};